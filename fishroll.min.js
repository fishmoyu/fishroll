/*==========================================================
@基于JQ3.5的循环滚动插件
@作者：张宇 QQ46708420 www.souniuniu.com
@没有限制被包裹元素.direction的样式，便于使用者自定义
@可能不适用于IE9及以下版本，请使用极速模式                                                        
===========================================================
*/
function rolling(options){this.opt=options||{};this.init=function(){var that=this;var id=$(that.opt.id);idw=id.width();idh=id.height();$(that.opt.id+' .direction').css({'position':'absolute',"word-break":"keep-all"});that.opt.play=that.opt.play||false;that.opt.direction=that.opt.direction||"left";that.opt.timer=that.opt.timer||1;that.opt.speed=that.opt.speed||10;that.setDri();if(that.opt.play==true){that.anplay()}};this.getDir=function(){var that=this;var bw=$(that.opt.id).width();var bh=$(that.opt.id).height();var dw=$(that.opt.id+' .direction').width();var dh=$(that.opt.id+' .direction').height();var json={bw:bw,bh:bh,dw:dw,dh:dh};return json};this.setDri=function(){var that=this;var whjson=that.getDir();switch(that.opt.direction){case"left":$(that.opt.id+' .direction').css({'margin-left':-whjson.dw+'px'});break;case"right":$(that.opt.id+' .direction').css({'margin-left':whjson.bw+'px'});break;case"top":$(that.opt.id+' .direction').css({'margin-top':-whjson.bh+'px'});break;case"bottom":$(that.opt.id+' .direction').css({'margin-top':whjson.bh+'px'});break}};this.getIdSize=function(cssname){var that=this;var n=0;n=$(that.opt.id+' .direction').css(cssname);n=n.split("px");return parseInt(n[0])};this.setIdPosition=function(cssjson){var that=this;$(that.opt.id+' .direction').css(cssjson)};this.jc=0;this.anplay=function(callback){var that=this;if(that.jc>=0&&that.opt.play==true){that.jc+=1};if(that.jc>that.opt.timer){var whjson=that.getDir();switch(that.opt.direction){case"left":var movex=that.getIdSize("margin-left");movex+=that.opt.speed;that.setIdPosition({"margin-left":movex+"px"});if(movex>whjson.bw+(10)){that.setIdPosition({"margin-left":-whjson.dw+"px"})};break;case'right':var movex=that.getIdSize("margin-left");movex-=that.opt.speed;that.setIdPosition({"margin-left":movex+"px"});if(movex<-whjson.dw){that.setIdPosition({"margin-left":whjson.bw+"px"})};break;case'top':var movey=that.getIdSize("margin-top");movey-=that.opt.speed;that.setIdPosition({"margin-top":movey+"px"});if(movey<-whjson.dh){that.setIdPosition({"margin-top":whjson.bh+"px"})};break;case'bottom':var movey=that.getIdSize("margin-top");movey+=that.opt.speed;that.setIdPosition({"margin-top":movey+"px"});if(movey>whjson.bh){that.setIdPosition({"margin-top":-whjson.bh+"px"})};break}that.jc=0};var anid=requestAnimationFrame(that.anplay.bind(this));if(that.opt.play==false){cancelAnimationFrame(anid)}};this.pause=function(){var that=this;that.opt.play=false};this.stop=function(){var that=this;that.opt.play=false;that.opt.jc=0};this.play=function(){var that=this;if(that.opt.play!=true){that.opt.play=true;that.anplay()}}}